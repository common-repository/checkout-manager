!function(e){e("#imcm-setting-tabs").tabs(),e(document).on("click",".imcm-setting-save-button",function(t){t.preventDefault(),e('.ui-tabs-panel[aria-hidden="false"] .imcm-setting, .imcm-checkout-fields-panel .imcm-setting').submit()}),e(".imcm-setting").submit(function(t){t.preventDefault(),e(".cx-response-message").hide();var o=e(this).serialize();e.ajax({url:IMCM.ajaxurl,data:o,type:"POST",dataType:"JSON",success:function(t){e(".cx-response-message").html(t.message).show(),console.log(t),"yes"==t.page_load?setTimeout(function(){location.reload()},2e3):setTimeout(function(){e(".cx-response-message").hide()},2e3)},error:function(e,t,o){console.log(o)}})}),e(document).on("click",".imcm-setting-reset-button",function(t){t.preventDefault(),e.ajax({url:IMCM.ajaxurl,data:{action:"reset-checkout-fields",nonce:IMCM.nonce},type:"POST",dataType:"JSON",success:function(t){e(".cx-response-message").html(t.message).show(),1==t.status&&setTimeout(function(){location.reload()},2e3)}})}),e(".woocm-tab-btn").on("click",function(t){t.preventDefault();var o=e(this).attr("data-tab");e(".woocm-tab-content").hide(),e(".woocm-tab-btn").removeClass("active"),e(this).addClass("active"),e("#"+o).show()}),e(".woocm-item-wrap.woocm-accordion").hide(),e(document).on("click",".woocm-list-wrap li.woocm-list-item h4",function(){var t=e(this).attr("data-name");e(".woocm-item-wrap.woocm-accordion").slideUp(),e(".woocm-item-wrap.woocm-accordion."+t).stop().slideToggle()}),e(".woocm-item-wrap .woocm-item-field-options").hide(),e(document).on("change",".woocm-item-wrap .woocm-item-field-type select",function(t){"select"==this.value||"radio"==this.value?e(".woocm-item-wrap .woocm-item-field-options").slideDown():e(".woocm-item-wrap .woocm-item-field-options").slideUp()}),e(".woocm-modal-toggle").on("click",function(t){t.preventDefault();e(this).attr("data-type");var o=Math.random().toString(36).substring(7);e(".woocm-input-field.woocm-id").val("new_field_"+o),e(".woocm-modal").toggleClass("is-visible")}),e(document).on("click",".woocm-clone-item-btn-panel .woocm-clone-item",function(t){t.preventDefault();var o=e(this).attr("data-type"),a=e(".woocm-input-field.woocm-id").val(),i=e("#woocm-clone-"+o+"-item").clone().html().replace(/%attrname%/g,"name").replace(/%%%/g,a);e("#woocm-"+o+"-list-wrap").append(i),e(".woocm-input-field.woocm-id").val(a),e(".woocm-modal").removeClass("is-visible")}),e(document).on("keyup",".woocm-item-input-field.woocm-label",function(t){t.preventDefault();var o=e(this).val();e(this).attr("value",o);var a=e(this).closest(".woocm-list-item");e(".woocm-item-heading",a).html(o)}),e(document).on("change",".woocm-input-field.woocm-id",function(t){t.preventDefault();var o=e(this).val(),a=e(this).data("oldid"),i=e(this).closest(".woocm-accordion"),c=e(".woocm-item-heading");if(console.log(c.data("name")),a)var n=e(this).attr("data-oldid");else n="new_field";c.data("name",c.data("name").replace(n,o)),e("input, select, textarea",i).each(function(t){e(this).attr("data-oldid",o),e(this).attr("name",e(this).attr("name").replace(n,o))})}),e(document).on("keyup",".woocm-input-field.woocm-label",function(t){t.preventDefault();var o=e(this).val();e(this).attr("value",o);var a=e(this).closest(".woocm-list-item");e(".woocm-item-heading",a).html(o)}),e(document).on("keyup",".woocm-input-field.woocm-placeholder",function(t){t.preventDefault();var o=e(this).val();e(this).attr("value",o)}),e(document).on("change",".woocm-clone-item-panel .woocm-input-field.woocm-type",function(t){t.preventDefault();var o=e(this).val();console.log(o),e('.woocm-clone-item-panel .woocm-input-field.woocm-type > option[selected="selected"]').removeAttr("selected"),e(this).find("option[value="+o+"]").attr("selected",!0)}),e(document).on("change",".woocm-clone-item-panel .woocm-input-field.woocm-class",function(t){t.preventDefault();var o=e(this).val();console.log(o),e('.woocm-clone-item-panel .woocm-input-field.woocm-class > option[selected="selected"]').removeAttr("selected"),e(this).find("option[value="+o+"]").attr("selected",!0)}),e(document).on("click",".woocm-action-panel .woocm-item-remove",function(t){t.preventDefault(),e(this).closest(".woocm-action-panel").parent().remove()}),localStorage.getItem("woocm-active-tab")&&e('a.ui-tabs-anchor[href="'+localStorage.getItem("woocm-active-tab")+'"]').click(),e("a.ui-tabs-anchor").click(function(t){t.preventDefault();var o=e(this).attr("href");localStorage.setItem("woocm-active-tab",o)}),e(".woocm-sortable").sortable({axis:"y"}),e(".imcm-style-color").minicolors({control:"hue",defaultValue:"",format:"rgb",showSpeed:100,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"bottom left",theme:"default",swatches:["swatches","opacity"]}),e("#imcm-display-position-form").submit(function(e){e.preventDefault()})}(jQuery);